use Data.JSON, Web.HTTP.Server.MCP;

# run mcp inspector: npx @modelcontextprotocol/inspector
class TestMcp {
	function : Main(args : String[]) ~ Nil {
		if(args->Size() = 1) {
			config_builder := JsonBuilder->New();
			
			config_json := config_builder->PushObject();
			config_json->Insert("name", "MCP server");
			config_json->Insert("instructions", "You are at test Objeck MCP server");
			config_json->Insert("version", "0.0.1");
			config_json->Insert("http_port", args[0]);
			config_json->Insert("debug", true);

			config := config_builder->Pop();
			config->ToString()->PrintLine();

			McpServer->Serve(config);
		}
		else {
			">>> Usage: JSON configuration file <<<"->PrintLine();
		};
	}
}
