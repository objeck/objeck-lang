use Collection, System.IO.Filesystem, Data.JSON.Stream;

class Test {
	function : Main(args : String[]) ~ Nil {
		if(args->Size() = 1) {
			parser := StreamParser->New(FileReader->New(args[0]));
			while(parser->More()) {
				type_name := parser->GetTypeName();
				type_value := parser->GetTypeValue();
				level := parser->GetLevel();

				"{$level}: {$type_name} => '{$type_value}'"->PrintLine();
				"---"->PrintLine();

				parser->Next();
			};
		}
		else {
			">>> usage: filename <<<"->ErrorLine();
		};
	}
}