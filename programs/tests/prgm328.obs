use System.IO.Net, Collection;

class Udp {
	function : Main(args : String[]) ~ Nil {
		if(args->Size() = 1) {
			target := args[0];

			if(target->Equals("client")) {
				DoClient();
			}
			else if(target->Equals("server")) {
				DoServer();
			}
		}
	}

	function : DoClient() ~ Nil {
		client := UDPSocket->New("127.0.0.1", 6017);
		client->WriteByte(101);
		client->Close();
	}

	function : DoServer() ~ Nil {
		server := UDPSocketServer->New(6017);
		server->Bind();
		server->ReadByte()->PrintLine();
		server->Close();
	}
}