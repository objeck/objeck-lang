use System.IO.Filesystem;

class Test {
	function : Main(args : String[]) ~ Nil {
		if(args->Size() = 1) {
			file_reader := FileReader->New(args[0]);

			line := file_reader->ReadLine();
			while(line <> Nil) {
				if(<>line->IsEmpty()) {
					ParseSection(line);
				};
				line := file_reader->ReadLine();
			};

			file_reader->Close();
		};
	}

	function : ParseSection(section : String) ~ Nil {
		buffer := "";

		"=> {$section}"->PrintLine();

		each(c in section) {
			if(c->IsChar() | c->IsDigit()) {
				buffer += c;
			}
			else if(<>buffer->IsEmpty()) {
				buffer->PrintLine();
				buffer := "";
			};
		};

		if(<>buffer->IsEmpty()) {
			buffer->PrintLine();
		};

		"---"->PrintLine();
	}
}